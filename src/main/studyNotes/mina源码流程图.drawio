<mxfile host="Electron" modified="2023-06-01T10:06:41.620Z" agent="Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) draw.io/21.2.8 Chrome/112.0.5615.165 Electron/24.2.0 Safari/537.36" etag="0YVfO4cR-7qENwR92tVR" version="21.2.8" type="device">
  <diagram name="第 1 页" id="hA-NuvloQ6WMjuEkUl7h">
    <mxGraphModel dx="2245" dy="828" grid="1" gridSize="10" guides="1" tooltips="1" connect="1" arrows="1" fold="1" page="1" pageScale="1" pageWidth="827" pageHeight="1169" math="0" shadow="0">
      <root>
        <mxCell id="0" />
        <mxCell id="1" parent="0" />
        <mxCell id="a3zCQYe-g9ECubF7-yn5-3" value="&lt;pre style=&quot;font-family: &amp;quot;JetBrains Mono&amp;quot;, monospace; font-size: 15pt;&quot;&gt;&lt;span style=&quot;&quot;&gt; &lt;/span&gt;&lt;span style=&quot;&quot;&gt; &lt;/span&gt;NioSocketAcceptor&lt;br&gt;&lt;/pre&gt;&lt;hr size=&quot;1&quot;&gt;&lt;div style=&quot;height:2px;&quot;&gt;&lt;span style=&quot;&quot;&gt; &lt;/span&gt;&lt;span style=&quot;&quot;&gt; &lt;/span&gt;&lt;span style=&quot;&quot;&gt; &lt;/span&gt;&lt;span style=&quot;&quot;&gt; &lt;/span&gt;&lt;span style=&quot;&quot;&gt; &lt;/span&gt;&lt;span style=&quot;&quot;&gt; &lt;/span&gt;&lt;span style=&quot;&quot;&gt; &lt;/span&gt;&lt;span style=&quot;&quot;&gt; &lt;/span&gt;&lt;span style=&quot;&quot;&gt; &lt;/span&gt;&lt;span style=&quot;&quot;&gt; &lt;/span&gt;&lt;span style=&quot;&quot;&gt; &lt;/span&gt;&lt;span style=&quot;&quot;&gt; &lt;/span&gt;&lt;span style=&quot;&quot;&gt; &lt;/span&gt;&lt;br&gt;&lt;/div&gt;&lt;span style=&quot;&quot;&gt; &lt;/span&gt;&lt;span style=&quot;&quot;&gt; &lt;/span&gt;&lt;span style=&quot;&quot;&gt; &lt;/span&gt;&lt;span style=&quot;&quot;&gt; &lt;/span&gt;&lt;span style=&quot;&quot;&gt; &lt;/span&gt;&lt;span style=&quot;&quot;&gt; &lt;/span&gt;&lt;span style=&quot;&quot;&gt; &lt;/span&gt;&lt;span style=&quot;&quot;&gt; &lt;/span&gt;&lt;span style=&quot;&quot;&gt; &lt;/span&gt;&lt;span style=&quot;&quot;&gt; &lt;/span&gt;&lt;span style=&quot;&quot;&gt; &lt;/span&gt;&lt;span style=&quot;&quot;&gt; &lt;/span&gt;&lt;span style=&quot;&quot;&gt; &lt;/span&gt;&lt;span style=&quot;&quot;&gt; &lt;/span&gt;&lt;span style=&quot;&quot;&gt; &lt;/span&gt;&lt;span style=&quot;&quot;&gt; &lt;/span&gt;&lt;span style=&quot;&quot;&gt; &lt;/span&gt;&lt;span style=&quot;&quot;&gt; &lt;/span&gt;&lt;span style=&quot;&quot;&gt; &lt;/span&gt;&lt;span style=&quot;&quot;&gt; &lt;/span&gt;&lt;span style=&quot;&quot;&gt; &lt;/span&gt;&lt;span style=&quot;&quot;&gt; &lt;/span&gt;&lt;span style=&quot;&quot;&gt; &lt;/span&gt;&lt;span style=&quot;&quot;&gt; &lt;/span&gt;&lt;span style=&quot;&quot;&gt; &lt;/span&gt;&lt;span style=&quot;&quot;&gt; &lt;/span&gt;&lt;span style=&quot;&quot;&gt; &lt;/span&gt;&lt;span style=&quot;white-space: pre;&quot;&gt; &lt;/span&gt;&lt;span style=&quot;white-space: pre;&quot;&gt; &lt;/span&gt;&lt;span style=&quot;white-space: pre;&quot;&gt; &lt;/span&gt;&lt;span style=&quot;white-space: pre;&quot;&gt; &lt;/span&gt;&lt;span style=&quot;white-space: pre;&quot;&gt; &lt;/span&gt;&lt;span style=&quot;white-space: pre;&quot;&gt; &lt;/span&gt;&lt;span style=&quot;white-space: pre;&quot;&gt; &lt;/span&gt;&lt;span style=&quot;white-space: pre;&quot;&gt; &lt;/span&gt;&lt;span style=&quot;white-space: pre;&quot;&gt; &lt;/span&gt;&lt;span style=&quot;white-space: pre;&quot;&gt; &lt;/span&gt;&lt;span style=&quot;white-space: pre;&quot;&gt; &lt;/span&gt;&lt;span style=&quot;white-space: pre;&quot;&gt; &lt;/span&gt;selector;&lt;br&gt;&lt;span style=&quot;&quot;&gt; &lt;/span&gt;&lt;span style=&quot;&quot;&gt; &lt;/span&gt;&lt;span style=&quot;&quot;&gt; &lt;/span&gt;&lt;span style=&quot;&quot;&gt; &lt;/span&gt;&lt;span style=&quot;&quot;&gt; &lt;/span&gt;&lt;span style=&quot;&quot;&gt; &lt;/span&gt;&lt;span style=&quot;&quot;&gt; &lt;/span&gt;&lt;span style=&quot;&quot;&gt; &lt;/span&gt;&lt;span style=&quot;&quot;&gt; &lt;/span&gt;&lt;span style=&quot;&quot;&gt; &lt;/span&gt;&lt;span style=&quot;&quot;&gt; &lt;/span&gt;&lt;span style=&quot;&quot;&gt; &lt;/span&gt;&lt;span style=&quot;&quot;&gt; &lt;/span&gt;&lt;span style=&quot;white-space: pre;&quot;&gt; &lt;/span&gt;&lt;span style=&quot;white-space: pre;&quot;&gt; &lt;/span&gt;&lt;span style=&quot;white-space: pre;&quot;&gt; &lt;/span&gt;&lt;span style=&quot;white-space: pre;&quot;&gt; &lt;/span&gt;&lt;span style=&quot;white-space: pre;&quot;&gt; &lt;/span&gt;&lt;span style=&quot;white-space: pre;&quot;&gt; &lt;/span&gt;&lt;span style=&quot;white-space: pre;&quot;&gt; &lt;/span&gt;&lt;span style=&quot;white-space: pre;&quot;&gt; &lt;/span&gt;&lt;span style=&quot;white-space: pre;&quot;&gt; &lt;/span&gt;&lt;span style=&quot;white-space: pre;&quot;&gt; &lt;/span&gt;&lt;span style=&quot;white-space: pre;&quot;&gt; &lt;/span&gt;&lt;span style=&quot;white-space: pre;&quot;&gt; &lt;/span&gt;DefaultSocketSessionConfig;&lt;br&gt;&lt;span style=&quot;white-space: pre;&quot;&gt; &lt;/span&gt;&lt;span style=&quot;white-space: pre;&quot;&gt; &lt;/span&gt;&lt;span style=&quot;white-space: pre;&quot;&gt; &lt;/span&gt;&lt;span style=&quot;white-space: pre;&quot;&gt; &lt;/span&gt;&lt;span style=&quot;white-space: pre;&quot;&gt; &lt;/span&gt;&lt;span style=&quot;white-space: pre;&quot;&gt; &lt;/span&gt;&lt;span style=&quot;white-space: pre;&quot;&gt; &lt;/span&gt;&lt;span style=&quot;white-space: pre;&quot;&gt; &lt;/span&gt;&lt;span style=&quot;white-space: pre;&quot;&gt; &lt;/span&gt;&lt;span style=&quot;white-space: pre;&quot;&gt; &lt;/span&gt;&lt;span style=&quot;white-space: pre;&quot;&gt; &lt;/span&gt;&lt;span style=&quot;white-space: pre;&quot;&gt; &lt;/span&gt;Executors.newCachedThreadPool();" style="verticalAlign=top;align=left;overflow=fill;fontSize=12;fontFamily=Helvetica;html=1;whiteSpace=wrap;" parent="1" vertex="1">
          <mxGeometry x="190" y="80" width="610" height="290" as="geometry" />
        </mxCell>
        <mxCell id="a3zCQYe-g9ECubF7-yn5-9" value="&lt;p style=&quot;margin:0px;margin-top:4px;text-align:center;&quot;&gt;SimpleIoProcessorPool&lt;br&gt;&lt;/p&gt;&lt;hr size=&quot;1&quot;&gt;&lt;div style=&quot;height:2px;&quot;&gt;&lt;span style=&quot;white-space: pre;&quot;&gt; &lt;/span&gt;IoProcessor&amp;lt;S&amp;gt;[cpu+1] pool&lt;br&gt;&lt;/div&gt;" style="verticalAlign=top;align=left;overflow=fill;fontSize=12;fontFamily=Helvetica;html=1;whiteSpace=wrap;" parent="1" vertex="1">
          <mxGeometry x="480" y="160" width="290" height="190" as="geometry" />
        </mxCell>
        <mxCell id="a3zCQYe-g9ECubF7-yn5-11" value="&lt;p style=&quot;margin:0px;margin-top:4px;text-align:center;&quot;&gt;IoProcessor&lt;br&gt;&lt;/p&gt;&lt;hr size=&quot;1&quot;&gt;&lt;div style=&quot;height:2px;&quot;&gt;selector;&amp;nbsp;&lt;/div&gt;&lt;div style=&quot;height:2px;&quot;&gt;&lt;br&gt;&lt;/div&gt;&lt;div style=&quot;height:2px;&quot;&gt;&lt;br&gt;&lt;/div&gt;&lt;div style=&quot;height:2px;&quot;&gt;&lt;br&gt;&lt;/div&gt;&lt;div style=&quot;height:2px;&quot;&gt;&lt;br&gt;&lt;/div&gt;&lt;div style=&quot;height:2px;&quot;&gt;&lt;br&gt;&lt;/div&gt;&lt;div style=&quot;height:2px;&quot;&gt;Executors.newCachedThreadPool();(同一个）&lt;br&gt;&lt;/div&gt;" style="verticalAlign=top;align=left;overflow=fill;fontSize=12;fontFamily=Helvetica;html=1;whiteSpace=wrap;" parent="1" vertex="1">
          <mxGeometry x="500" y="228" width="250" height="110" as="geometry" />
        </mxCell>
        <mxCell id="a3zCQYe-g9ECubF7-yn5-13" value="Acceptor线程" style="rounded=0;whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="270" y="400" width="120" height="60" as="geometry" />
        </mxCell>
        <mxCell id="a3zCQYe-g9ECubF7-yn5-18" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;" parent="1" source="a3zCQYe-g9ECubF7-yn5-14" target="a3zCQYe-g9ECubF7-yn5-17" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="a3zCQYe-g9ECubF7-yn5-21" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=1;exitY=0.5;exitDx=0;exitDy=0;" parent="1" source="a3zCQYe-g9ECubF7-yn5-14" edge="1">
          <mxGeometry relative="1" as="geometry">
            <mxPoint x="190" y="205" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="a3zCQYe-g9ECubF7-yn5-14" value="new NioSocketAcceptor" style="rounded=0;whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="-340" y="170" width="230" height="70" as="geometry" />
        </mxCell>
        <mxCell id="a3zCQYe-g9ECubF7-yn5-19" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=1;exitY=0.5;exitDx=0;exitDy=0;" parent="1" source="a3zCQYe-g9ECubF7-yn5-17" edge="1">
          <mxGeometry relative="1" as="geometry">
            <mxPoint x="210" y="705" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="a3zCQYe-g9ECubF7-yn5-17" value="acceptor.bind(new InetSocketAddress(port));" style="rounded=0;whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="-345" y="670" width="240" height="70" as="geometry" />
        </mxCell>
        <mxCell id="a3zCQYe-g9ECubF7-yn5-20" value="绑定后，NioSocketAcceptor&lt;span style=&quot;background-color: initial;&quot;&gt;线程池起一个accept线程&lt;/span&gt;&lt;br&gt;（多个地址也只会起这一个线程）" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=none;fillColor=none;" parent="1" vertex="1">
          <mxGeometry x="-90" y="670" width="300" height="40" as="geometry" />
        </mxCell>
        <mxCell id="a3zCQYe-g9ECubF7-yn5-22" value="registerHandles()" style="rounded=0;whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="270" y="520" width="120" height="60" as="geometry" />
        </mxCell>
        <mxCell id="a3zCQYe-g9ECubF7-yn5-25" value="将地址绑定到通道的ServerSocket上，&lt;br&gt;再将通道注册在acceptor的selector上，多个地址就会有多个通道&lt;br&gt;。监听accept事件" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=none;fillColor=none;" parent="1" vertex="1">
          <mxGeometry x="389" y="520" width="360" height="60" as="geometry" />
        </mxCell>
        <mxCell id="a3zCQYe-g9ECubF7-yn5-26" value="&lt;pre style=&quot;font-family: &amp;quot;JetBrains Mono&amp;quot;, monospace; font-size: 15pt;&quot;&gt;&lt;span style=&quot;background-color: rgb(255, 255, 255);&quot;&gt;select()&lt;/span&gt;&lt;/pre&gt;" style="rounded=0;whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="270" y="650" width="120" height="60" as="geometry" />
        </mxCell>
        <mxCell id="a3zCQYe-g9ECubF7-yn5-29" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;" parent="1" source="a3zCQYe-g9ECubF7-yn5-27" edge="1">
          <mxGeometry relative="1" as="geometry">
            <mxPoint x="800" y="820" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="a3zCQYe-g9ECubF7-yn5-27" value="processHandles(selectedHandles());" style="rounded=0;whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="270" y="790" width="120" height="60" as="geometry" />
        </mxCell>
        <mxCell id="a3zCQYe-g9ECubF7-yn5-28" value="监听到注册事件" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=none;fillColor=none;" parent="1" vertex="1">
          <mxGeometry x="425" y="668" width="110" height="30" as="geometry" />
        </mxCell>
        <mxCell id="a3zCQYe-g9ECubF7-yn5-31" value="&lt;p style=&quot;margin:0px;margin-top:4px;text-align:center;&quot;&gt;NioSocketSession&lt;br&gt;&lt;/p&gt;&lt;hr size=&quot;1&quot;&gt;&lt;div style=&quot;height:2px;&quot;&gt;&lt;pre style=&quot;border-color: var(--border-color); font-family: &amp;quot;JetBrains Mono&amp;quot;, monospace;&quot;&gt;&lt;font style=&quot;font-size: 15px;&quot;&gt;NioSocketAcceptor;&lt;/font&gt;&lt;/pre&gt;&lt;pre style=&quot;border-color: var(--border-color); font-family: &amp;quot;JetBrains Mono&amp;quot;, monospace;&quot;&gt;&lt;font style=&quot;font-size: 15px;&quot;&gt;SimpleIoProcessorPool;&lt;br&gt;&lt;/font&gt;&lt;/pre&gt;&lt;pre style=&quot;border-color: var(--border-color);&quot;&gt;&lt;font style=&quot;&quot;&gt;&lt;font face=&quot;JetBrains Mono, monospace&quot;&gt;&lt;font style=&quot;font-size: 15px;&quot;&gt;SocketChannel;&lt;/font&gt;&lt;br&gt;&lt;/font&gt;&lt;/font&gt;&lt;/pre&gt;&lt;pre style=&quot;border-color: var(--border-color);&quot;&gt;&lt;font style=&quot;&quot;&gt;&lt;font face=&quot;JetBrains Mono, monospace&quot;&gt;&lt;font style=&quot;&quot;&gt;&lt;font style=&quot;font-size: 15px;&quot;&gt;DefaultIoFilterChain&lt;/font&gt;&lt;br&gt;&lt;/font&gt;&lt;/font&gt;&lt;/font&gt;&lt;/pre&gt;&lt;/div&gt;" style="verticalAlign=top;align=left;overflow=fill;fontSize=12;fontFamily=Helvetica;html=1;whiteSpace=wrap;" parent="1" vertex="1">
          <mxGeometry x="827" y="570" width="173" height="150" as="geometry" />
        </mxCell>
        <mxCell id="a3zCQYe-g9ECubF7-yn5-32" value="先创建一个session" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=none;fillColor=none;" parent="1" vertex="1">
          <mxGeometry x="1020" y="638" width="120" height="30" as="geometry" />
        </mxCell>
        <mxCell id="a3zCQYe-g9ECubF7-yn5-33" value="随机一个IoProcessor塞入这个session，&lt;br&gt;线程池起一个processor线程，一个IoProcessor只会起一个线程" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=none;fillColor=none;" parent="1" vertex="1">
          <mxGeometry x="1020" y="800" width="360" height="40" as="geometry" />
        </mxCell>
        <mxCell id="a3zCQYe-g9ECubF7-yn5-35" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=1;exitY=0.5;exitDx=0;exitDy=0;" parent="1" source="a3zCQYe-g9ECubF7-yn5-34" edge="1">
          <mxGeometry relative="1" as="geometry">
            <mxPoint x="1480" y="819.578947368421" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="a3zCQYe-g9ECubF7-yn5-34" value="session.getProcessor().add(session);" style="whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="840" y="790" width="120" height="60" as="geometry" />
        </mxCell>
        <mxCell id="a3zCQYe-g9ECubF7-yn5-36" value="Processor线程" style="rounded=0;whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="1550" y="570" width="120" height="60" as="geometry" />
        </mxCell>
        <mxCell id="a3zCQYe-g9ECubF7-yn5-37" value="select(SELECT_TIMEOUT);" style="rounded=0;whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="1550" y="680" width="120" height="60" as="geometry" />
        </mxCell>
        <mxCell id="a3zCQYe-g9ECubF7-yn5-38" value="handleNewSessions()" style="rounded=0;whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="1550" y="800" width="120" height="60" as="geometry" />
        </mxCell>
        <mxCell id="a3zCQYe-g9ECubF7-yn5-39" value="将niosession的channel绑定读事件到IoProcessor的selector上，&lt;br&gt;将NioSocketAcceptor的Filter接入DefaultIoFilterChain&lt;br&gt;开始跑sessioncreate，sessionOpened，监听器跑l.sessionCreated(session);" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=none;fillColor=none;" parent="1" vertex="1">
          <mxGeometry x="1680" y="800" width="430" height="60" as="geometry" />
        </mxCell>
        <mxCell id="a3zCQYe-g9ECubF7-yn5-40" value="&lt;pre style=&quot;font-family: &amp;quot;JetBrains Mono&amp;quot;, monospace; font-size: 15pt;&quot;&gt;&lt;span style=&quot;background-color: rgb(255, 255, 255);&quot;&gt;process();&lt;/span&gt;&lt;/pre&gt;" style="rounded=0;whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="1550" y="930" width="120" height="60" as="geometry" />
        </mxCell>
        <mxCell id="a3zCQYe-g9ECubF7-yn5-41" value="监听到读事件就会先读取数据到buffer&lt;br&gt;，然后再跑filterChain.fireMessageReceived(buf);" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=none;fillColor=none;" parent="1" vertex="1">
          <mxGeometry x="1700" y="930" width="280" height="40" as="geometry" />
        </mxCell>
        <mxCell id="CBODpAHSifHVBuot4-Oe-1" value="processor" style="rounded=0;whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="-200" y="960" width="120" height="60" as="geometry" />
        </mxCell>
        <mxCell id="CBODpAHSifHVBuot4-Oe-2" value="headfilter" style="rounded=0;whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="40" y="960" width="120" height="60" as="geometry" />
        </mxCell>
        <mxCell id="CBODpAHSifHVBuot4-Oe-3" value="iofilter" style="rounded=0;whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="270" y="960" width="120" height="60" as="geometry" />
        </mxCell>
        <mxCell id="CBODpAHSifHVBuot4-Oe-4" value="tail" style="rounded=0;whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="520" y="960" width="120" height="60" as="geometry" />
        </mxCell>
        <mxCell id="CBODpAHSifHVBuot4-Oe-5" value="handle" style="rounded=0;whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="740" y="960" width="120" height="60" as="geometry" />
        </mxCell>
        <mxCell id="CBODpAHSifHVBuot4-Oe-6" value="" style="endArrow=open;endFill=1;endSize=12;html=1;rounded=0;" parent="1" edge="1">
          <mxGeometry width="160" relative="1" as="geometry">
            <mxPoint x="-80" y="980" as="sourcePoint" />
            <mxPoint x="30" y="980" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="CBODpAHSifHVBuot4-Oe-7" value="" style="endArrow=open;endFill=1;endSize=12;html=1;rounded=0;" parent="1" edge="1">
          <mxGeometry width="160" relative="1" as="geometry">
            <mxPoint x="160" y="980" as="sourcePoint" />
            <mxPoint x="250" y="980" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="CBODpAHSifHVBuot4-Oe-8" value="" style="endArrow=open;endFill=1;endSize=12;html=1;rounded=0;" parent="1" edge="1">
          <mxGeometry width="160" relative="1" as="geometry">
            <mxPoint x="390" y="980" as="sourcePoint" />
            <mxPoint x="500" y="980" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="CBODpAHSifHVBuot4-Oe-9" value="" style="endArrow=open;endFill=1;endSize=12;html=1;rounded=0;" parent="1" edge="1">
          <mxGeometry width="160" relative="1" as="geometry">
            <mxPoint x="640" y="980" as="sourcePoint" />
            <mxPoint x="720" y="980" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="CBODpAHSifHVBuot4-Oe-10" value="" style="endArrow=open;endFill=1;endSize=12;html=1;rounded=0;" parent="1" edge="1">
          <mxGeometry width="160" relative="1" as="geometry">
            <mxPoint x="40" y="1010" as="sourcePoint" />
            <mxPoint x="-60" y="1010" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="CBODpAHSifHVBuot4-Oe-11" value="" style="endArrow=open;endFill=1;endSize=12;html=1;rounded=0;" parent="1" edge="1">
          <mxGeometry width="160" relative="1" as="geometry">
            <mxPoint x="270" y="1010" as="sourcePoint" />
            <mxPoint x="170" y="1010" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="CBODpAHSifHVBuot4-Oe-12" value="" style="endArrow=open;endFill=1;endSize=12;html=1;rounded=0;" parent="1" edge="1">
          <mxGeometry width="160" relative="1" as="geometry">
            <mxPoint x="520" y="1010" as="sourcePoint" />
            <mxPoint x="420" y="1010" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="CBODpAHSifHVBuot4-Oe-13" value="" style="endArrow=open;endFill=1;endSize=12;html=1;rounded=0;" parent="1" edge="1">
          <mxGeometry width="160" relative="1" as="geometry">
            <mxPoint x="740" y="1010" as="sourcePoint" />
            <mxPoint x="660" y="1010" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="CBODpAHSifHVBuot4-Oe-15" value="" style="endArrow=open;endFill=1;endSize=12;html=1;rounded=0;" parent="1" edge="1">
          <mxGeometry width="160" relative="1" as="geometry">
            <mxPoint x="-180" y="930" as="sourcePoint" />
            <mxPoint x="-20" y="930" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="CBODpAHSifHVBuot4-Oe-16" value="读数据方向" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=none;fillColor=none;" parent="1" vertex="1">
          <mxGeometry x="-160" y="898" width="80" height="30" as="geometry" />
        </mxCell>
        <mxCell id="CBODpAHSifHVBuot4-Oe-17" value="" style="endArrow=open;endFill=1;endSize=12;html=1;rounded=0;" parent="1" edge="1">
          <mxGeometry width="160" relative="1" as="geometry">
            <mxPoint x="-30" y="1070" as="sourcePoint" />
            <mxPoint x="-170" y="1070" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="CBODpAHSifHVBuot4-Oe-18" value="写数据方向" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=none;fillColor=none;" parent="1" vertex="1">
          <mxGeometry x="-150" y="1068" width="80" height="30" as="geometry" />
        </mxCell>
        <mxCell id="CBODpAHSifHVBuot4-Oe-19" value="写数据的时候会将request存在session的队列，每个session的队列都不一样，&lt;br&gt;然后将session存在对应的processor的flushingSessions里，当跑processor的run方法时&lt;br&gt;就会通过this.flush(currentTime)，session的channel写出去" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=none;fillColor=none;" parent="1" vertex="1">
          <mxGeometry x="1680" y="1020" width="480" height="60" as="geometry" />
        </mxCell>
        <mxCell id="x-cFJqT3GjdobW88m7vR-2" value="&lt;font style=&quot;font-size: 100px;&quot;&gt;服&lt;br&gt;务&lt;br&gt;端&lt;/font&gt;" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=none;fillColor=none;" parent="1" vertex="1">
          <mxGeometry x="-730" y="338" width="120" height="370" as="geometry" />
        </mxCell>
        <mxCell id="x-cFJqT3GjdobW88m7vR-3" value="心跳检测：写空闲，读空闲，读写空闲，通过processor的this.notifyIdleSessions(currentTime);&lt;br&gt;检测最终会通过filter连接到handle来判断是否断开" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=none;fillColor=none;" parent="1" vertex="1">
          <mxGeometry x="1740" y="1119" width="520" height="40" as="geometry" />
        </mxCell>
        <mxCell id="S20lzfwb3RhnEBtzWhCD-1" value="&lt;div&gt;&amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; this.flush(currentTime);&lt;/div&gt;&lt;div&gt;&amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp;&amp;nbsp;&lt;/div&gt;" style="rounded=0;whiteSpace=wrap;html=1;" vertex="1" parent="1">
          <mxGeometry x="1550" y="1015" width="120" height="60" as="geometry" />
        </mxCell>
        <mxCell id="S20lzfwb3RhnEBtzWhCD-2" value="this.notifyIdleSessions(currentTime);" style="rounded=0;whiteSpace=wrap;html=1;" vertex="1" parent="1">
          <mxGeometry x="1550" y="1109" width="120" height="60" as="geometry" />
        </mxCell>
      </root>
    </mxGraphModel>
  </diagram>
</mxfile>
